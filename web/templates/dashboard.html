{% extends "base.html" %}

{% block content %}
<h1 style="text-align: center; font-size: 3rem; color: var(--accent-green); margin-bottom: 2rem; text-shadow: 0 0 20px rgba(124, 252, 0, 0.8);">
    ğŸ“Š DASHBOARD CAYO PERICO
</h1>

<!-- Stats Globales du Serveur -->
<div class="section">
    <h2>ğŸ“ˆ Statistiques Globales</h2>
    <div class="stats-grid" id="server-stats">
        <div class="stat-card">
            <h3>Total Braquages</h3>
            <div class="stat-value" id="total-heists">--</div>
            <div class="stat-label">Braquages complÃ©tÃ©s</div>
        </div>
        <div class="stat-card">
            <h3>Argent Total</h3>
            <div class="stat-value money" id="total-earned">--</div>
            <div class="stat-label">GTA$ gagnÃ©s</div>
        </div>
        <div class="stat-card">
            <h3>Joueurs Actifs</h3>
            <div class="stat-value" id="total-players">--</div>
            <div class="stat-label">Participants uniques</div>
        </div>
        <div class="stat-card">
            <h3>Gain Moyen</h3>
            <div class="stat-value money" id="avg-gain">--</div>
            <div class="stat-label">Par braquage</div>
        </div>
        <div class="stat-card">
            <h3>Elite Challenges</h3>
            <div class="stat-value" id="elite-completed">--</div>
            <div class="stat-label">ComplÃ©tÃ©s</div>
        </div>
        <div class="stat-card">
            <h3>Temps Moyen</h3>
            <div class="stat-value" id="avg-time">--</div>
            <div class="stat-label">Mission</div>
        </div>
    </div>
</div>

<!-- Graphiques -->
<div class="section">
    <h2>ğŸ“Š Graphiques d'ActivitÃ©</h2>
    <div class="chart-container">
        <canvas id="activity-chart"></canvas>
    </div>
</div>

<div class="section">
    <h2>ğŸ’° Gains Hebdomadaires</h2>
    <div class="chart-container">
        <canvas id="gains-chart"></canvas>
    </div>
</div>

<!-- Leaderboards Mini -->
<div class="section">
    <h2>ğŸ† Top 5 Joueurs</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem;">
        <!-- Total Earned -->
        <div>
            <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">ğŸ’° Total GagnÃ©</h3>
            <table id="top-earned-table">
                <thead>
                    <tr>
                        <th>Rang</th>
                        <th>Joueur</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="top-earned">
                    <tr><td colspan="3">Chargement...</td></tr>
                </tbody>
            </table>
        </div>

        <!-- Elite Challenges -->
        <div>
            <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">â­ Elite Challenges</h3>
            <table id="top-elite-table">
                <thead>
                    <tr>
                        <th>Rang</th>
                        <th>Joueur</th>
                        <th>Elite</th>
                    </tr>
                </thead>
                <tbody id="top-elite">
                    <tr><td colspan="3">Chargement...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Braquages RÃ©cents -->
<div class="section">
    <h2>ğŸ• Braquages RÃ©cents</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Leader</th>
                <th>Cible</th>
                <th>Joueurs</th>
                <th>Gain</th>
                <th>Temps</th>
                <th>Elite</th>
            </tr>
        </thead>
        <tbody id="recent-heists">
            <tr><td colspan="7" style="text-align: center;">Chargement...</td></tr>
        </tbody>
    </table>
</div>

{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', path='/js/charts.js') }}?v=2"></script>
<script src="{{ url_for('static', path='/js/dashboard.js') }}?v=2"></script>
{% endblock %}
